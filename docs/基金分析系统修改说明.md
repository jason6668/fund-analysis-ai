# 基金分析系统修改完成

## ✅ 已完成的修改

### 📝 文档更新

1. **README.md**
   - ✅ 项目标题：股票 → 基金
   - ✅ 功能描述：技术面分析 → 净值走势、持仓结构、基金经理分析
   - ✅ 数据来源：Tushare/YFinance → 天天基金、东方财富
   - ✅ 投资理念：乖离率 → 短期涨幅控制
   - ✅ 配置说明：STOCK_LIST → FUND_LIST
   - ✅ 推送效果示例：股票 → 基金
   - ✅ API接口说明：股票 → 基金
   - ✅ Roadmap更新：港股/美股 → 债券基金/海外基金

2. **.env.example**
   - ✅ 配置文件标题更新
   - ✅ FUND_LIST 配置项（兼容 STOCK_LIST）
   - ✅ 基金代码格式说明

3. **新增教程文档**
   - ✅ `docs/基金分析教程.md` - 完整的中文使用教程

### 💻 代码更新

1. **main.py**
   - ✅ 文档字符串更新
   - ✅ 命令行参数：--stocks → --funds（兼容旧参数）
   - ✅ 变量名：stock_codes → fund_codes
   - ✅ 日志输出文本更新
   - ✅ 帮助信息更新

2. **新增基金数据模块**
   - ✅ `data_provider/fund_fetcher.py` - 基金数据获取器
     - 获取基金基本信息
     - 获取基金净值数据
     - 获取基金业绩数据
     - 获取基金持仓信息
     - 获取实时估值数据

3. **新增基金分析模块**
   - ✅ `src/fund_analyzer.py` - 基金趋势分析器
     - 净值趋势分析
     - 回调幅度分析
     - 收益表现评估
     - 投资建议生成
     - 操作建议生成

## 🔧 核心功能

### 基金数据获取 (fund_fetcher.py)

```python
from data_provider.fund_fetcher import FundDataFetcher

fetcher = FundDataFetcher()

# 1. 获取基金信息
info = fetcher.get_fund_info("000001")

# 2. 获取净值数据
nav_df = fetcher.get_fund_nav("000001", days=120)

# 3. 获取业绩数据
performance = fetcher.get_fund_performance("000001")

# 4. 获取持仓信息
holdings = fetcher.get_fund_holdings("000001")

# 5. 获取实时数据
realtime = fetcher.get_realtime_data("000001")
```

### 基金趋势分析 (fund_analyzer.py)

```python
from src.fund_analyzer import FundTrendAnalyzer

analyzer = FundTrendAnalyzer()

# 分析基金
result = analyzer.analyze(
    df=nav_df,
    code="000001",
    name="华夏成长",
    performance=performance
)

# 格式化输出
print(analyzer.format_analysis(result))
```

## 📊 分析结果示例

```
🟢 适合买入 | 易方达蓝筹精选(005827)

📊 净值趋势
  当前净值: 2.856
  趋势状态: 稳健上涨
  MA5: 2.834 | MA20: 2.789 | MA60: 2.712
  距离MA5: +0.8% | 接近均线，可以关注

📈 收益表现
  近1周: +2.5% | 近1月: +5.8%
  近3月: +12.3% | 近6月: +18.6%
  近1年: +28.5%

💡 投资建议（评分: 5）
  ✅ 趋势向上（稳健上涨）
  ✅ 接近均线支撑
  ✅ 年度收益优秀（28.5%）

🎯 操作建议
  买入时机: 当前位置可以买入，回调后加仓
  止损建议: 跌破2.565（MA20下方8%）考虑止损
  目标收益: 目标收益 +15% ~ +25%
```

## 🚀 使用方法

### 1. 本地运行

```bash
# 安装依赖
pip install -r requirements.txt

# 配置环境变量（复制 .env.example 为 .env）
# 编辑 .env 文件，配置：
# - FUND_LIST=000001,110022,163406
# - GEMINI_API_KEY=你的密钥
# - WECHAT_WEBHOOK_URL=推送地址

# 运行分析
python main.py

# 分析特定基金
python main.py --funds 000001,110022

# 启动WebUI
python main.py --webui
```

### 2. GitHub Actions 部署

1. Fork 项目
2. 配置 Secrets:
   - `GEMINI_API_KEY`
   - `FUND_LIST` (或 `STOCK_LIST`)
   - `WECHAT_WEBHOOK_URL` 等推送渠道
3. 启用 Actions
4. 每日 18:00 自动运行

## 🎯 投资理念

系统内置稳健投资理念：

1. **不追高** - 短期涨幅 > 10% 标记为追高风险
2. **趋势投资** - 优选中长期趋势向上的基金
3. **回调买入** - 回调至均线附近时介入
4. **严格止损** - MA20 下方 8% 考虑止损

## 📋 支持的基金类型

- ✅ 股票型基金
- ✅ 混合型基金
- ✅ 指数型基金
- ✅ ETF 基金
- ✅ QDII 基金
- ⚠️ 货币基金（不推荐，净值变化小）
- ⚠️ 债券基金（可分析但意义不大）

## 🔄 兼容性

为了兼容性，系统同时支持：

1. **配置名称**
   - 新：`FUND_LIST`
   - 旧：`STOCK_LIST`（仍然有效）

2. **命令行参数**
   - 新：`--funds`
   - 旧：`--stocks`（仍然有效）

3. **代码接口**
   - 内部使用 `fund_codes`
   - 但 `stock_codes` 参数名在某些地方保留兼容

## ⚠️ 注意事项

1. **数据源限制**
   - AkShare 有请求频率限制
   - 建议间隔 3-5 秒请求
   - 避免短时间大量请求

2. **基金代码格式**
   - 必须是 6 位数字
   - 示例：`000001`、`110022`、`163406`

3. **净值更新时间**
   - 基金净值通常在交易日晚上更新
   - 建议设置定时任务在 18:00 或更晚执行

## 📖 详细文档

查看 `docs/基金分析教程.md` 获取完整使用教程，包括：
- 快速开始指南
- 配置详解
- 基金代码查询方法
- 常见问题解答
- 自定义策略方法

## 🎉 总结

项目已成功从**股票分析系统**转换为**基金分析系统**，所有核心功能保持不变：

- ✅ AI 智能分析
- ✅ 多渠道推送
- ✅ GitHub Actions 自动化
- ✅ WebUI 管理界面
- ✅ 定时任务调度

新增功能：
- ✅ 基金数据获取模块
- ✅ 基金趋势分析器
- ✅ 基金投资建议生成
- ✅ 完整中文教程

保持兼容：
- ✅ 旧配置项继续有效
- ✅ 旧命令行参数可用
- ✅ 代码平滑升级
